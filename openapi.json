{"openapi":"3.1.0","info":{"title":"Knowledge & Metrics Service","description":"Internal Knowledge & Metrics Service for evaluating alternative data vendors. Provides vendor metrics, statistical analysis, and natural language query capabilities.","version":"0.1.0"},"paths":{"/api/v1/metrics/info":{"get":{"tags":["Metrics v1"],"summary":"Get dataset information","description":"Returns metadata about the available data: vendors, universes, date range.","operationId":"get_data_info_api_v1_metrics_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DataInfoResponse"}}}}}}},"/api/v1/metrics/upload":{"post":{"tags":["Metrics v1"],"summary":"Upload new dataset","description":"Uploads a new dataset CSV file to replace the existing data.","operationId":"upload_data_file_api_v1_metrics_upload_post","parameters":[{"name":"file","in":"query","required":true,"schema":{"type":"string","format":"binary","description":"CSV file content as bytes","title":"File"},"description":"CSV file content as bytes"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Upload Data File Api V1 Metrics Upload Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/metrics/vendors":{"get":{"tags":["Metrics v1"],"summary":"List all vendors","description":"Returns a list of all available vendor names.","operationId":"list_vendors_api_v1_metrics_vendors_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VendorListResponse"}}}}}}},"/api/v1/metrics/vendors/{vendor}":{"get":{"tags":["Metrics v1"],"summary":"Get vendor metrics","description":"Returns comprehensive metrics for a specific vendor with optional date filtering.","operationId":"get_vendor_metrics_api_v1_metrics_vendors__vendor__get","parameters":[{"name":"vendor","in":"path","required":true,"schema":{"type":"string","title":"Vendor"}},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Filter data from this date (YYYY-MM-DD)","title":"Start Date"},"description":"Filter data from this date (YYYY-MM-DD)"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Filter data until this date (YYYY-MM-DD)","title":"End Date"},"description":"Filter data until this date (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VendorMetricsResponse"}}}},"404":{"description":"Vendor not found"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/metrics/period":{"get":{"tags":["Metrics v1"],"summary":"Get period metrics","description":"Returns aggregated metrics for a time period across all vendors.","operationId":"get_period_metrics_api_v1_metrics_period_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Period start date (YYYY-MM-DD)","title":"Start Date"},"description":"Period start date (YYYY-MM-DD)"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"description":"Period end date (YYYY-MM-DD)","title":"End Date"},"description":"Period end date (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeriodMetricsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/metrics/compare":{"get":{"tags":["Metrics v1"],"summary":"Compare all vendors","description":"Returns comparative analysis and rankings across all vendors.","operationId":"compare_vendors_api_v1_metrics_compare_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComparativeMetricsResponse"}}}}}}},"/api/v1/metrics/drawdowns":{"get":{"tags":["Metrics v1"],"summary":"Analyze drawdowns","description":"Returns analysis of drawdown/stress periods.","operationId":"get_drawdown_analysis_api_v1_metrics_drawdowns_get","parameters":[{"name":"vendor","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by vendor name","title":"Vendor"},"description":"Filter by vendor name"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DrawdownAnalysisResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/query":{"post":{"tags":["Natural Language Queries v1"],"summary":"Process natural language query","description":"Submit a natural language query about vendor metrics. The system will parse your query, extract entities (vendors, dates, metrics), classify the intent, and return relevant data.","operationId":"process_query_api_v1_query_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/query/supported":{"get":{"tags":["Natural Language Queries v1"],"summary":"Get supported query patterns","description":"Returns a list of supported query types with examples.","operationId":"get_supported_queries_api_v1_query_supported_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/SupportedQueryResponse"},"type":"array","title":"Response Get Supported Queries Api V1 Query Supported Get"}}}}}}},"/api/v2/metrics/vendors":{"get":{"tags":["Metrics v2"],"summary":"List vendors with pagination","description":"Returns paginated list of vendors with summary statistics.","operationId":"list_vendors_v2_api_v2_metrics_vendors_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":10,"title":"Page Size"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse_PaginatedResponse_VendorListItemV2__"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v2/metrics/vendors/{vendor}":{"get":{"tags":["Metrics v2"],"summary":"Get enhanced vendor metrics","description":"Returns comprehensive metrics with nested structure.","operationId":"get_vendor_metrics_v2_api_v2_metrics_vendors__vendor__get","parameters":[{"name":"vendor","in":"path","required":true,"schema":{"type":"string","title":"Vendor"}},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"End Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse_VendorMetricsV2_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v2/metrics/compare":{"get":{"tags":["Metrics v2"],"summary":"Compare vendors (v2)","description":"Enhanced vendor comparison with detailed rankings.","operationId":"compare_vendors_v2_api_v2_metrics_compare_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse_dict_"}}}}}}},"/":{"get":{"tags":["Root"],"summary":"Root","description":"Root endpoint with welcome message.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Health check endpoint for container orchestration.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}}},"components":{"schemas":{"ApiResponse_PaginatedResponse_VendorListItemV2__":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"data":{"$ref":"#/components/schemas/PaginatedResponse_VendorListItemV2_"},"meta":{"$ref":"#/components/schemas/MetaInfo"},"errors":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Errors"}},"type":"object","required":["data"],"title":"ApiResponse[PaginatedResponse[VendorListItemV2]]"},"ApiResponse_VendorMetricsV2_":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"data":{"$ref":"#/components/schemas/VendorMetricsV2"},"meta":{"$ref":"#/components/schemas/MetaInfo"},"errors":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Errors"}},"type":"object","required":["data"],"title":"ApiResponse[VendorMetricsV2]"},"ApiResponse_dict_":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"data":{"type":"object","title":"Data"},"meta":{"$ref":"#/components/schemas/MetaInfo"},"errors":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Errors"}},"type":"object","required":["data"],"title":"ApiResponse[dict]"},"ComparativeMetricsResponse":{"properties":{"vendors":{"items":{"type":"string"},"type":"array","title":"Vendors","description":"List of analyzed vendors"},"best_avg_signal":{"type":"string","title":"Best Avg Signal","description":"Vendor with highest avg signal"},"lowest_drawdown_rate":{"type":"string","title":"Lowest Drawdown Rate","description":"Vendor with lowest drawdown rate"},"highest_signal_volatility":{"type":"string","title":"Highest Signal Volatility","description":"Vendor with highest signal volatility"},"signal_ranking":{"additionalProperties":{"type":"integer"},"type":"object","title":"Signal Ranking","description":"Ranking by signal strength"},"stability_ranking":{"additionalProperties":{"type":"integer"},"type":"object","title":"Stability Ranking","description":"Ranking by stability (lower volatility = better)"}},"type":"object","required":["vendors","best_avg_signal","lowest_drawdown_rate","highest_signal_volatility","signal_ranking","stability_ranking"],"title":"ComparativeMetricsResponse","description":"Comparative analysis across vendors."},"DataInfoResponse":{"properties":{"vendors":{"items":{"type":"string"},"type":"array","title":"Vendors","description":"Available vendors"},"universes":{"items":{"type":"string"},"type":"array","title":"Universes","description":"Available universes"},"date_range":{"prefixItems":[{"type":"string","format":"date"},{"type":"string","format":"date"}],"type":"array","maxItems":2,"minItems":2,"title":"Date Range","description":"Data coverage"},"total_records":{"type":"integer","title":"Total Records","description":"Total data points"}},"type":"object","required":["vendors","universes","date_range","total_records"],"title":"DataInfoResponse","description":"Dataset information."},"DrawdownAnalysisResponse":{"properties":{"total_drawdown_events":{"type":"integer","title":"Total Drawdown Events","description":"Total drawdown events"},"vendors_affected":{"items":{"type":"string"},"type":"array","title":"Vendors Affected","description":"Vendors with drawdowns"},"avg_signal_during_drawdown":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Signal During Drawdown","description":"Average signal during drawdowns"},"drawdown_dates":{"items":{"type":"string"},"type":"array","title":"Drawdown Dates","description":"Dates of drawdown events"},"by_vendor":{"anyOf":[{"additionalProperties":{"type":"integer"},"type":"object"},{"type":"null"}],"title":"By Vendor","description":"Drawdown count per vendor"}},"type":"object","required":["total_drawdown_events","vendors_affected","drawdown_dates"],"title":"DrawdownAnalysisResponse","description":"Drawdown period analysis."},"ExtractedEntitiesResponse":{"properties":{"vendors":{"items":{"type":"string"},"type":"array","title":"Vendors","description":"Detected vendors"},"universes":{"items":{"type":"string"},"type":"array","title":"Universes","description":"Detected universes"},"start_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Start Date","description":"Start date if found"},"end_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"End Date","description":"End date if found"},"metrics":{"items":{"type":"string"},"type":"array","title":"Metrics","description":"Metric keywords"},"raw_query":{"type":"string","title":"Raw Query","description":"Original query"}},"type":"object","required":["raw_query"],"title":"ExtractedEntitiesResponse","description":"Entities extracted from a query."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Service health status","default":"healthy"},"version":{"type":"string","title":"Version","description":"API version"},"environment":{"type":"string","title":"Environment","description":"Deployment environment"}},"type":"object","required":["version","environment"],"title":"HealthResponse","description":"Health check response."},"MetaInfo":{"properties":{"api_version":{"type":"string","title":"Api Version","default":"2.0"},"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","title":"MetaInfo","description":"Metadata included in all v2 responses."},"PaginatedResponse_VendorListItemV2_":{"properties":{"items":{"items":{"$ref":"#/components/schemas/VendorListItemV2"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"has_next":{"type":"boolean","title":"Has Next"},"has_prev":{"type":"boolean","title":"Has Prev"}},"type":"object","required":["items","total","page","page_size","has_next","has_prev"],"title":"PaginatedResponse[VendorListItemV2]"},"PeriodMetricsResponse":{"properties":{"start_date":{"type":"string","format":"date","title":"Start Date","description":"Period start date"},"end_date":{"type":"string","format":"date","title":"End Date","description":"Period end date"},"record_count":{"type":"integer","title":"Record Count","description":"Total records in period"},"vendor_count":{"type":"integer","title":"Vendor Count","description":"Number of vendors with data"},"avg_signal_strength":{"type":"number","title":"Avg Signal Strength","description":"Average signal strength across all vendors"},"signal_strength_std":{"type":"number","title":"Signal Strength Std","description":"Signal strength standard deviation"},"total_drawdown_events":{"type":"integer","title":"Total Drawdown Events","description":"Total drawdown events"},"vendor_signals":{"additionalProperties":{"type":"number"},"type":"object","title":"Vendor Signals","description":"Average signal per vendor"},"vendor_drawdown_rates":{"additionalProperties":{"type":"number"},"type":"object","title":"Vendor Drawdown Rates","description":"Drawdown rate per vendor"}},"type":"object","required":["start_date","end_date","record_count","vendor_count","avg_signal_strength","signal_strength_std","total_drawdown_events","vendor_signals","vendor_drawdown_rates"],"title":"PeriodMetricsResponse","description":"Aggregated metrics for a time period."},"QueryRequest":{"properties":{"query":{"type":"string","maxLength":500,"minLength":3,"title":"Query","description":"Natural language query about vendor metrics"}},"type":"object","required":["query"],"title":"QueryRequest","description":"Natural language query request.","examples":[{"query":"What are the metrics for AlphaSignals?"},{"query":"Compare all vendors"},{"query":"Show drawdown periods in January 2020"},{"query":"Which vendor has the best signal strength?"}]},"QueryResponse":{"properties":{"intent":{"type":"string","title":"Intent","description":"Classified query intent"},"entities":{"allOf":[{"$ref":"#/components/schemas/ExtractedEntitiesResponse"}],"description":"Extracted entities from query"},"data":{"anyOf":[{},{"type":"null"}],"title":"Data","description":"Query result data"},"explanation":{"type":"string","title":"Explanation","description":"Human-readable explanation"},"success":{"type":"boolean","title":"Success","description":"Whether query succeeded","default":true},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if failed"}},"type":"object","required":["intent","entities","explanation"],"title":"QueryResponse","description":"Natural language query response.","example":{"data":{"AlphaSignals":{"drawdown_rate":0.3,"signal_strength_mean":0.266}},"entities":{"metrics":["signal"],"raw_query":"What is the signal strength for AlphaSignals?","universes":[],"vendors":["AlphaSignals"]},"explanation":"Retrieved metrics for AlphaSignals","intent":"vendor_metrics","success":true}},"SupportedQueryResponse":{"properties":{"intent":{"type":"string","title":"Intent","description":"Intent identifier"},"description":{"type":"string","title":"Description","description":"What this query type does"},"examples":{"items":{"type":"string"},"type":"array","title":"Examples","description":"Example queries"}},"type":"object","required":["intent","description","examples"],"title":"SupportedQueryResponse","description":"Supported query patterns."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VendorListItemV2":{"properties":{"name":{"type":"string","title":"Name"},"universe":{"type":"string","title":"Universe"},"record_count":{"type":"integer","title":"Record Count"},"avg_signal":{"type":"number","title":"Avg Signal"},"drawdown_rate":{"type":"number","title":"Drawdown Rate"}},"type":"object","required":["name","universe","record_count","avg_signal","drawdown_rate"],"title":"VendorListItemV2","description":"Vendor list item with summary stats (v2)."},"VendorListResponse":{"properties":{"vendors":{"items":{"type":"string"},"type":"array","title":"Vendors","description":"Available vendor names"},"count":{"type":"integer","title":"Count","description":"Number of vendors"}},"type":"object","required":["vendors","count"],"title":"VendorListResponse","description":"List of vendors."},"VendorMetricsResponse":{"properties":{"vendor":{"type":"string","title":"Vendor","description":"Vendor name"},"universe":{"type":"string","title":"Universe","description":"Asset class/universe"},"record_count":{"type":"integer","title":"Record Count","description":"Number of data points analyzed"},"date_range":{"prefixItems":[{"type":"string","format":"date"},{"type":"string","format":"date"}],"type":"array","maxItems":2,"minItems":2,"title":"Date Range","description":"Analysis period"},"feature_x_mean":{"type":"number","title":"Feature X Mean","description":"Mean of feature_x"},"feature_x_std":{"type":"number","title":"Feature X Std","description":"Standard deviation of feature_x"},"feature_y_mean":{"type":"number","title":"Feature Y Mean","description":"Mean of feature_y"},"feature_y_std":{"type":"number","title":"Feature Y Std","description":"Standard deviation of feature_y"},"signal_strength_mean":{"type":"number","title":"Signal Strength Mean","description":"Average signal strength"},"signal_strength_std":{"type":"number","title":"Signal Strength Std","description":"Signal strength volatility"},"signal_strength_min":{"type":"number","title":"Signal Strength Min","description":"Minimum signal strength"},"signal_strength_max":{"type":"number","title":"Signal Strength Max","description":"Maximum signal strength"},"drawdown_count":{"type":"integer","title":"Drawdown Count","description":"Number of drawdown periods"},"drawdown_rate":{"type":"number","title":"Drawdown Rate","description":"Percentage of periods in drawdown (0-1)"},"feature_xy_correlation":{"type":"number","title":"Feature Xy Correlation","description":"Correlation between feature_x and feature_y"},"signal_volatility":{"type":"number","title":"Signal Volatility","description":"Coefficient of variation (std/mean)"},"avg_signal_during_drawdown":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Signal During Drawdown","description":"Average signal during drawdown periods"},"avg_signal_outside_drawdown":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Signal Outside Drawdown","description":"Average signal outside drawdown periods"}},"type":"object","required":["vendor","universe","record_count","date_range","feature_x_mean","feature_x_std","feature_y_mean","feature_y_std","signal_strength_mean","signal_strength_std","signal_strength_min","signal_strength_max","drawdown_count","drawdown_rate","feature_xy_correlation","signal_volatility"],"title":"VendorMetricsResponse","description":"Comprehensive metrics for a single vendor.","example":{"avg_signal_during_drawdown":0.1967,"avg_signal_outside_drawdown":0.2957,"date_range":["2020-01-03","2020-03-06"],"drawdown_count":3,"drawdown_rate":0.3,"feature_x_mean":0.07,"feature_x_std":0.0986,"feature_xy_correlation":-0.8234,"feature_y_mean":0.011,"feature_y_std":0.0567,"record_count":10,"signal_strength_max":0.42,"signal_strength_mean":0.266,"signal_strength_min":0.05,"signal_strength_std":0.1189,"signal_volatility":0.447,"universe":"Equities","vendor":"AlphaSignals"}},"VendorMetricsV2":{"properties":{"vendor":{"type":"string","title":"Vendor"},"universe":{"type":"string","title":"Universe"},"record_count":{"type":"integer","title":"Record Count"},"date_range":{"prefixItems":[{"type":"string","format":"date"},{"type":"string","format":"date"}],"type":"array","maxItems":2,"minItems":2,"title":"Date Range"},"signal":{"type":"object","title":"Signal","description":"Signal strength statistics"},"features":{"type":"object","title":"Features","description":"Feature statistics"},"risk":{"type":"object","title":"Risk","description":"Risk-related metrics"},"performance":{"type":"object","title":"Performance","description":"Performance indicators"}},"type":"object","required":["vendor","universe","record_count","date_range","signal","features","risk","performance"],"title":"VendorMetricsV2","description":"Enhanced vendor metrics for v2."}}}}
